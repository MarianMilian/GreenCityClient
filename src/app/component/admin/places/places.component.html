<div class="card mx-auto" style="width: 95% ">
  <div class="card-body">
    <h4 class="card-title">Places</h4>
    <div class="table-responsive">
      <table mat-table
             [dataSource]="places | paginate: {itemsPerPage: pageSize, currentPage: page + 1, totalItems: totalItems}"
             class="mat-elevation-z8">

        <ng-container matColumnDef="Category">
          <th mat-header-cell *matHeaderCellDef>Category</th>
          <td mat-cell *matCellDef="let element"> {{element.category.name}} </td>
        </ng-container>

        <ng-container matColumnDef="Name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>

        <ng-container matColumnDef="Location">
          <th mat-header-cell *matHeaderCellDef>Location</th>
          <td mat-cell *matCellDef="let element"> {{element.location.address}} </td>
        </ng-container>

        <ng-container matColumnDef="Working hours">
          <th mat-header-cell *matHeaderCellDef>Working Hours</th>
          <td mat-cell *matCellDef="let element"> {{convertHoursToShort(element.openingHoursList)}} </td>
        </ng-container>

        <ng-container matColumnDef="Added By">
          <th mat-header-cell *matHeaderCellDef>Added By</th>
          <td mat-cell *matCellDef="let element"> {{element.author.email}} </td>
        </ng-container>

        <ng-container matColumnDef="Added On">
          <th mat-header-cell *matHeaderCellDef>Added On</th>
          <td mat-cell *matCellDef="let element"> {{element.modifiedDate}} </td>
        </ng-container>

        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef>
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
              {{defaultStatus}}
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" (click)="changeStatus('approved')">Approved</a>
              <a class="dropdown-item" (click)="changeStatus('proposed')">Proposed</a>
              <a class="dropdown-item" (click)="changeStatus('declined')">Declined</a>
            </div>
          </th>
          <td mat-cell *matCellDef="let element"> {{element.status}} </td>
        </ng-container>

        <ng-container matColumnDef="Action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <div class="action" *ngIf="defaultStatus === 'proposed'">
              <button (click)="updateStatus(element.id, 'APPROVED')" type="button" class="btn btn-outline-success">
                Approve
              </button>
              <button (click)="updateStatus(element.id, 'DECLINED')" type="button" class="btn btn-outline-danger">
                Decline
              </button>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="loading">
          <mat-footer-cell *matFooterCellDef colspan="3"> Loading data...</mat-footer-cell>
        </ng-container>

        <ng-container matColumnDef="noData">
          <mat-footer-cell *matFooterCellDef colspan="3"> No data</mat-footer-cell>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide': places!=null}"></mat-footer-row>
        <mat-footer-row *matFooterRowDef="['noData']"
                        [ngClass]="{'hide': places!=null && places.length != 0}"></mat-footer-row>
      </table>
    </div>
    <br>
    <div class="container">
      <div id="pagination">
        <pagination [itemsPerPage]="pageSize" [totalItems]="totalItems"
                    (pageChanged)="changePage($event)" [maxSize]="6" [rotate]="true"
                    [boundaryLinks]="true" class="flex-wrap"></pagination>
      </div>
      Items per page:
      <mat-select [(value)]="pageSize" (valueChange)="changePage(page)" style="width: 50px;margin-left: 15px">
        <mat-option [value]="2">2</mat-option>
        <mat-option [value]="5">5</mat-option>
        <mat-option [value]="10">10</mat-option>
        <mat-option [value]="15">15</mat-option>
        <mat-option [value]="20">20</mat-option>
      </mat-select>
    </div>
  </div>
</div>
